"use strict";(self.webpackChunkconcat_docs=self.webpackChunkconcat_docs||[]).push([[524],{3905:function(e,t,r){r.d(t,{Zo:function(){return u},kt:function(){return c}});var s=r(7294);function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,s)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t){if(null==e)return{};var r,s,n=function(e,t){if(null==e)return{};var r,s,n={},i=Object.keys(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)r=i[s],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var d=s.createContext({}),p=function(e){var t=s.useContext(d),r=t;return e&&(r="function"==typeof e?e(t):a(a({},t),e)),r},u=function(e){var t=p(e.components);return s.createElement(d.Provider,{value:t},e.children)},l={inlineCode:"code",wrapper:function(e){var t=e.children;return s.createElement(s.Fragment,{},t)}},m=s.forwardRef((function(e,t){var r=e.components,n=e.mdxType,i=e.originalType,d=e.parentName,u=o(e,["components","mdxType","originalType","parentName"]),m=p(r),c=n,h=m["".concat(d,".").concat(c)]||m[c]||l[c]||i;return r?s.createElement(h,a(a({ref:t},u),{},{components:r})):s.createElement(h,a({ref:t},u))}));function c(e,t){var r=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var i=r.length,a=new Array(i);a[0]=m;var o={};for(var d in t)hasOwnProperty.call(t,d)&&(o[d]=t[d]);o.originalType=e,o.mdxType="string"==typeof e?e:n,a[1]=o;for(var p=2;p<i;p++)a[p]=r[p];return s.createElement.apply(null,a)}return s.createElement.apply(null,r)}m.displayName="MDXCreateElement"},9330:function(e,t,r){r.r(t),r.d(t,{assets:function(){return u},contentTitle:function(){return d},default:function(){return c},frontMatter:function(){return o},metadata:function(){return p},toc:function(){return l}});var s=r(7462),n=r(3366),i=(r(7294),r(3905)),a=["components"],o={sidebar_position:1,displayed_sidebar:"apiSidebar",hide_table_of_contents:!0},d="Users",p={unversionedId:"api/endpoints/users/users",id:"api/endpoints/users/users",title:"Users",description:"This object represents an end-user within an event organization. Users can be attendees, vendors, performers, staff, etc.",source:"@site/docs/api/endpoints/users/users.mdx",sourceDirName:"api/endpoints/users",slug:"/api/endpoints/users/",permalink:"/docs/api/endpoints/users/",editUrl:"https://github.com/ConventionCatCorp/concat-docs/tree/main/docs/api/endpoints/users/users.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,displayed_sidebar:"apiSidebar",hide_table_of_contents:!0},sidebar:"apiSidebar",previous:{title:"Logic Error Codes",permalink:"/docs/api/errors/logicerrorcodes"},next:{title:"Roles & Permissions",permalink:"/docs/api/endpoints/roles/"}},u={},l=[{value:"Retrieve Current User",id:"retrieve-current-user",level:3},{value:"Retrieve a User",id:"retrieve-a-user",level:3},{value:"Create a User",id:"create-a-user",level:3},{value:"Update a User",id:"update-a-user",level:3},{value:"Delete a User&#39;s PII",id:"delete-a-users-pii",level:3}],m={toc:l};function c(e){var t=e.components,r=(0,n.Z)(e,a);return(0,i.kt)("wrapper",(0,s.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"users"},"Users"),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,"This object represents an end-user within an event organization. Users can be attendees, vendors, performers, staff, etc."),(0,i.kt)("restList",null,(0,i.kt)("restElement",{method:"GET",path:"/api/users/current",anchor:"retrieve-current-user"}),(0,i.kt)("restElement",{method:"GET",path:"/api/users/:id",anchor:"retrieve-a-user"}),(0,i.kt)("restElement",{method:"POST",path:"/api/users/manual",anchor:"create-a-user"}),(0,i.kt)("restElement",{method:"PATCH",path:"/api/users/:id",anchor:"update-a-user"}),(0,i.kt)("restElement",{method:"DELETE",path:"/api/users/:id/pii",anchor:"delete-a-users-pii"}))),(0,i.kt)("h3",{id:"retrieve-current-user"},"Retrieve Current User"),(0,i.kt)("p",null,"Returns the user object for the currently authenticated user."),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,(0,i.kt)("h4",null,"Permissions"),(0,i.kt)("div",null,"Requires the ",(0,i.kt)("code",null,"pii:basic")," permission. Other permissions are required to access additional information, such as PII and order history."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Response"),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-bornAt",name:"bornAt",type:"string",response:!0},"The date the user was born, in ISO 8601 format."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-emailMd5",name:"emailMd5",type:"string",response:!0},"The MD5 hash of the user's email address."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-firstName",name:"firstName",type:"string",response:!0},"The user's legal first name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-id",name:"id",type:"number",response:!0},"The ID of the user."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-lastName",name:"lastName",type:"string",response:!0},"The user's legal last name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-permissions",name:"permissions",type:"array of string",response:!0},"The permissions granted to the user."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-preferredName",name:"preferredName",type:"string",optional:!0,response:!0},"An optional preferred name for the user. This will be displayed first on the user's profile."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-newsletter",name:"newsletter",type:"boolean",response:!0},"Whether the user has opted in to the newsletter."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-identityVerified",name:"identityVerified",type:"boolean",response:!0},"Returns true if the user has verified their identity."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-isVolunteer",name:"isVolunteer",type:"boolean",response:!0},"Returns true if the user is an assigned volunteer."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-username",name:"username",type:"string",response:!0},"The user's username."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Scope Restricted Attributes"),(0,i.kt)("div",null,(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressCity",name:"addressCity",type:"string",response:!0,permissions:["pii:address"]},"City, town, or village of the user's address."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressCountry",name:"addressCountry",type:"string",response:!0,permissions:["pii:address"]},"Two-letter ISO 3166-1 alpha-2 country code."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressLine1",name:"addressLine1",type:"string",response:!0,permissions:["pii:address"]},"First line of the user's address. (e.g. 1234 Main St)"),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressLine2",name:"addressLine2",type:"string",response:!0,permissions:["pii:address"],optional:!0},"Optional second line of the user's address. (e.g. Suite 100, Apt 2B)"),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressState",name:"addressState",type:"string",response:!0,permissions:["pii:address"]},"State or province of the user's address."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-addressZipcode",name:"addressZipcode",type:"string",response:!0,permissions:["pii:address"]},"ZIP or postal code of the user's address."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-email",name:"email",type:"string",response:!0,permissions:["pii:email"]},"The user's email address."),(0,i.kt)("attribute",{id:"user-current-retrieve-resp-phone",name:"phone",type:"string",response:!0,permissions:["pii:phone"]},"Phone number in international format. (e.g. +15555555555)")))),(0,i.kt)("div",null,(0,i.kt)("exampleBox",{method:"GET",header:"/api/users/:id",headerSubText:"cURL"},'curl https://reg.cces.dev/api/users/current \\\n  -H "Authorization: Bearer <id>:<secret>"'),(0,i.kt)("exampleBox",{header:"Response",headerSubText:"application/json"},'{\n  "addressCity": "New York",\n  "addressCountry": "US",\n  "addressLine1": "123 Main St",\n  "addressLine2": "Suite 100",\n  "addressState": "NY",\n  "addressZipcode": "10001",\n  "bornAt": "1990-01-01T00:00:00.000Z",\n  "email": "aperson@example.com",\n  "firstName": "John",\n  "id": 1234,\n  "lastName": "Doe",\n  "newsletter": true,\n  "phone": "+15555555555",\n  "preferredName": "Jonathan",\n  "username": "aperson",\n  "identityVerified": true,\n  "isVolunteer": true,\n  "permissions": [],\n}'))),(0,i.kt)("h3",{id:"retrieve-a-user"},"Retrieve a User"),(0,i.kt)("p",null,"Returns the user object for the given ID."),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,(0,i.kt)("h4",null,"Permissions"),(0,i.kt)("div",null,"Requires the ",(0,i.kt)("code",null,"system:login")," permission. Other permissions are required to access additional information, such as PII and order history."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Path Attributes"),(0,i.kt)("attribute",{id:"user-retrieve-req-id",name:"id",type:"number"},"The ID of the user to retrieve."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Response"),(0,i.kt)("attribute",{id:"user-retrieve-resp-bans",name:"bans",type:"array of Ban",response:!0},"A list of bans applied to the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-bornAt",name:"bornAt",type:"string",response:!0},"The date the user was born, in ISO 8601 format."),(0,i.kt)("attribute",{id:"user-retrieve-resp-emailMd5",name:"emailMd5",type:"string",response:!0},"The MD5 hash of the user's email address."),(0,i.kt)("attribute",{id:"user-retrieve-resp-firstName",name:"firstName",type:"string",response:!0},"The user's legal first name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-retrieve-resp-hasRestrictionNotice",name:"hasRestrictionNotice",type:"boolean",response:!0},"Returns true if the user has a note with type ",(0,i.kt)("code",null,"restriction")," on their account."),(0,i.kt)("attribute",{id:"user-retrieve-resp-hasSecondFactor",name:"hasSecondFactor",type:"boolean",response:!0},"Returns true if the user has a second factor enabled."),(0,i.kt)("attribute",{id:"user-retrieve-resp-id",name:"id",type:"number",response:!0},"The ID of the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-identity",name:"identity",type:"Identity",optional:!0,response:!0},"The Identity Verification information for the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-lastName",name:"lastName",type:"string",response:!0},"The user's legal last name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-retrieve-resp-organizationId",name:"organizationId",type:"string",response:!0},"The ID of the organization the user belongs to."),(0,i.kt)("attribute",{id:"user-retrieve-resp-permissions",name:"permissions",type:"array of string",response:!0},"The permissions granted to the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-preferredName",name:"preferredName",type:"string",optional:!0,response:!0},"An optional preferred name for the user. This will be displayed first on the user's profile."),(0,i.kt)("attribute",{id:"user-retrieve-resp-registration",name:"registration",type:"Registration",optional:!0,response:!0},"The attendee registration record for the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-reviewReason",name:"reviewReason",type:"string",optional:!0,response:!0},"The reason the user requires manual review."),(0,i.kt)("attribute",{id:"user-retrieve-resp-roles",name:"roles",type:"array of string",response:!0},"The roles granted to the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-username",name:"username",type:"string",response:!0},"The user's username."),(0,i.kt)("details",null,(0,i.kt)("summary",null,"Scope Restricted Attributes"),(0,i.kt)("div",null,(0,i.kt)("attribute",{id:"user-retrieve-resp-addressCity",name:"addressCity",type:"string",response:!0,permissions:["registration:read:pii"]},"City, town, or village of the user's address."),(0,i.kt)("attribute",{id:"user-retrieve-resp-addressCountry",name:"addressCountry",type:"string",response:!0,permissions:["registration:read:pii"]},"Two-letter ISO 3166-1 alpha-2 country code."),(0,i.kt)("attribute",{id:"user-retrieve-resp-addressLine1",name:"addressLine1",type:"string",response:!0,permissions:["registration:read:pii"]},"First line of the user's address. (e.g. 1234 Main St)"),(0,i.kt)("attribute",{id:"user-retrieve-resp-addressLine2",name:"addressLine2",type:"string",response:!0,permissions:["registration:read:pii"],optional:!0},"Optional second line of the user's address. (e.g. Suite 100, Apt 2B)"),(0,i.kt)("attribute",{id:"user-retrieve-resp-addressState",name:"addressState",type:"string",response:!0,permissions:["registration:read:pii"]},"State or province of the user's address."),(0,i.kt)("attribute",{id:"user-retrieve-resp-addressZipcode",name:"addressZipcode",type:"string",response:!0,permissions:["registration:read:pii"]},"ZIP or postal code of the user's address."),(0,i.kt)("attribute",{id:"user-retrieve-resp-email",name:"email",type:"string",response:!0,permissions:["registration:read:pii"]},"The user's email address."),(0,i.kt)("attribute",{id:"user-retrieve-resp-grants",name:"grants",type:"array of Grant",response:!0,permissions:["order:view"]},"A list of grants applied to the user."),(0,i.kt)("attribute",{id:"user-retrieve-resp-orders",name:"orders",type:"array of Order",response:!0,permissions:["order:view"]},"A list of orders the user has made."),(0,i.kt)("attribute",{id:"user-retrieve-resp-phone",name:"phone",type:"string",response:!0,permissions:["registration:read:pii"]},"Phone number in international format. (e.g. +15555555555)")))),(0,i.kt)("div",null,(0,i.kt)("exampleBox",{method:"GET",header:"/api/users/:id",headerSubText:"cURL"},'curl https://reg.cces.dev/api/users/:id \\\n  -H "Authorization: Bearer <id>:<secret>"'),(0,i.kt)("exampleBox",{header:"Response",headerSubText:"application/json"},'{\n  "addressCity": "New York",\n  "addressCountry": "US",\n  "addressLine1": "123 Main St",\n  "addressLine2": "Suite 100",\n  "addressState": "NY",\n  "addressZipcode": "10001",\n  "bans": [],\n  "bornAt": "1990-01-01T00:00:00.000Z",\n  "email": "aperson@example.com",\n  "emailMd5": "5d54d73edc3da103d3541cd390fd0897",\n  "firstName": "John",\n  "grants": [],\n  "hasRestrictionNotice": false,\n  "hasSecondFactor": false,\n  "id": 1234,\n  "identity": {\n    "firstName": "John",\n    "lastName": "Doe",\n    "status": "verified",\n    "type": "document",\n    "bornAt": "1990-01-01T00:00:00.000Z",\n  },\n  "lastName": "Doe",\n  "orders": [],\n  "organizationId": "8f6f2588-9175-4cdf-8045-ce51aa7d9e14",\n  "permissions": [],\n  "phone": "+15555555555",\n  "preferredName": "Jonathan",\n  "registration": null,\n  "reviewReason": null,\n  "roles": [],\n  "username": "aperson",\n}'))),(0,i.kt)("h3",{id:"create-a-user"},"Create a User"),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Using the ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/users")," endpoint to create a user is not recommended as captcha verification may be required. Please use the ",(0,i.kt)("inlineCode",{parentName:"p"},"/api/users/manual")," endpoint documented below."))),(0,i.kt)("p",null,"Creates a new user with the given information, bypassing the prior ban check. ",(0,i.kt)("em",{parentName:"p"},"This behaviour may change in the future.")),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,(0,i.kt)("h4",null,"Scopes"),(0,i.kt)("div",null,"Requires the ",(0,i.kt)("code",null,"user:create")," scope."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Request Attributes"),(0,i.kt)("attribute",{id:"user-create-addressCity",name:"addressCity",type:"string"},"City, town, or village of the user's address."),(0,i.kt)("attribute",{id:"user-create-addressCountry",name:"addressCity",type:"string"},"Two-letter ISO 3166-1 alpha-2 country code."),(0,i.kt)("attribute",{id:"user-create-addressLine1",name:"addressLine1",type:"string"},"First line of the user's address. (e.g. 1234 Main St)"),(0,i.kt)("attribute",{id:"user-create-addressLine2",name:"addressLine2",type:"string",optional:!0},"Optional second line of the user's address. (e.g. Suite 100, Apt 2B)"),(0,i.kt)("attribute",{id:"user-create-addressState",name:"addressState",type:"string"},"State or province of the user's address."),(0,i.kt)("attribute",{id:"user-create-addressZipcode",name:"addressZipcode",type:"string"},"ZIP or postal code of the user's address."),(0,i.kt)("attribute",{id:"user-create-bornAt",name:"bornAt",type:"string"},"The date the user was born, in ISO 8601 format."),(0,i.kt)("attribute",{id:"user-create-email",name:"email",type:"string"},"The user's email address."),(0,i.kt)("attribute",{id:"user-create-firstName",name:"firstName",type:"string"},"The user's legal first name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-create-lastName",name:"lastName",type:"string"},"The user's legal last name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-create-phone",name:"phone",type:"string"},"Phone number in international format. (e.g. +15555555555)"),(0,i.kt)("attribute",{id:"user-create-preferredName",name:"preferredName",type:"string",optional:!0},"An optional preferred name for the user. This will be displayed first on the user's profile."),(0,i.kt)("attribute",{id:"user-create-reason",name:"reason",type:"string, min. 10 chars"},"A brief reason explaining why the user is being created. This will be saved to the audit log."),(0,i.kt)("attribute",{id:"user-create-username",name:"username",type:"string"},"The user's username."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Response"),(0,i.kt)("attribute",{id:"user-create-resp-id",name:"id",type:"number",response:!0},"Returns the ID of the newly created user.")),(0,i.kt)("div",null,(0,i.kt)("exampleBox",{method:"POST",header:"/api/users/manual",headerSubText:"application/json"},'{\n  "addressCity": "New York",\n  "addressCountry": "US",\n  "addressLine1": "123 Main St",\n  "addressState": "NY",\n  "addressZipcode": "10001",\n  "bornAt": "1990-01-01T00:00:00.000Z",\n  "email": "aperson@example.com",\n  "firstName": "John",\n  "lastName": "Doe",\n  "password": "areallysecurepassword",\n  "preferredName": "Jonathan",\n  "reason": "Auto-generated user from external SSO",\n  "username": "jdoe",\n}'),(0,i.kt)("exampleBox",{header:"Response",headerSubText:"application/json"},'{\n  "id": 1234,\n}'))),(0,i.kt)("h3",{id:"update-a-user"},"Update a User"),(0,i.kt)("p",null,"Modify the target user's attributes. Only the fields specified in the request will be updated and other fields will remain unchanged."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Attributes such as ",(0,i.kt)("inlineCode",{parentName:"p"},"id"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"password"),", and ",(0,i.kt)("inlineCode",{parentName:"p"},"username")," cannot be updated."))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"If using the OAuth API, attempting to update any fields on the current user's account requires the user's current password."))),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,(0,i.kt)("h4",null,"Permissions"),(0,i.kt)("div",null,"Requires the ",(0,i.kt)("code",null,"user:update")," permission."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Path Attributes"),(0,i.kt)("attribute",{id:"user-update-req-id",name:"id",type:"number"},"The ID of the user to update."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Request Attributes"),(0,i.kt)("attribute",{id:"user-update-addressLine1",name:"addressLine1",type:"string",optional:!0},"First line of the user's address. (e.g. 1234 Main St)"),(0,i.kt)("attribute",{id:"user-update-addressLine2",name:"addressLine2",type:"string",optional:!0},"Optional second line of the user's address. (e.g. Suite 100, Apt 2B)"),(0,i.kt)("attribute",{id:"user-update-addressCity",name:"addressCity",type:"string",optional:!0},"City, town, or village of the user's address."),(0,i.kt)("attribute",{id:"user-update-addressCountry",name:"addressCountry",type:"string",optional:!0},"Two-letter ISO 3166-1 alpha-2 country code."),(0,i.kt)("attribute",{id:"user-update-addressState",name:"addressState",type:"string",optional:!0},"State or province of the user's address."),(0,i.kt)("attribute",{id:"user-update-addressZipcode",name:"addressZipcode",type:"string",optional:!0},"ZIP or postal code of the user's address."),(0,i.kt)("attribute",{id:"user-update-bornAt",name:"bornAt",type:"string",optional:!0},"Date of birth in ISO 8601 format. (e.g. 1990-01-01)"),(0,i.kt)("attribute",{id:"user-update-email",name:"email",type:"string",optional:!0},"The user's email address."),(0,i.kt)("attribute",{id:"user-update-firstName",name:"firstName",type:"string",optional:!0},"The user's legal first name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-update-lastName",name:"lastName",type:"string",optional:!0},"The user's legal last name, as it appears on their ID."),(0,i.kt)("attribute",{id:"user-update-phone",name:"phone",type:"string",optional:!0},"Phone number in international format. (e.g. +15555555555)"),(0,i.kt)("attribute",{id:"user-update-preferredName",name:"preferredName",type:"string",optional:!0},"An optional preferred name for the user. This will be displayed first on the user's profile."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Response"),"This call will not return a payload, and will return a 204 No Content response on success."),(0,i.kt)("div",null,(0,i.kt)("exampleBox",{header:"/api/users/:id",method:"PATCH",headerSubText:"application/json"},'{\n  "addressLine1": "123 Main St",\n  "addressLine2": "Suite 100",\n  "addressCity": "New York",\n  "addressCountry": "US",\n  "addressState": "NY",\n  "addressZipcode": "10001",\n  "bornAt": "1990-01-01T00:00:00.000Z",\n  "email": "test@example.com",\n  "firstName": "John",\n  "lastName": "Doe",\n  "phone": "+15555555555",\n  "preferredName": "Jonathan",\n}'),(0,i.kt)("exampleBox",{header:"Response"},"204 No Content"))),(0,i.kt)("h3",{id:"delete-a-users-pii"},"Delete a User's PII"),(0,i.kt)("div",{className:"admonition admonition-danger alert alert--danger"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"danger")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Removing a user's personally identifiable information (PII) is a permanent and irreversible action. Sensitive fields (such as name, address, email, phone number, etc.) will be replaced with a generic placeholder, blank string, or ",(0,i.kt)("inlineCode",{parentName:"p"},"deleted"),"."))),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Attempting to delete a banned user's PII will return a 204 No Content, but will not actually delete the user's PII."))),(0,i.kt)("p",null,"Removes all personally identifiable information (PII) from a user record, effectively anonymizing and disabling the user's account."),(0,i.kt)("splitColumn",null,(0,i.kt)("div",null,(0,i.kt)("h4",null,"Permissions"),(0,i.kt)("div",null,"Requires the ",(0,i.kt)("code",null,"pii:admin:delete")," permission."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Path Attributes"),(0,i.kt)("attribute",{id:"user-retrieve-id",name:"id",type:"number"},"The ID of the user to remove PII from."),(0,i.kt)("div",{style:{marginBottom:"1.5rem"}}),(0,i.kt)("h4",null,"Response"),"This call will not return a payload, and will return a 204 No Content response irrespective of success or failure."),(0,i.kt)("div",null,(0,i.kt)("exampleBox",{method:"DELETE",header:"/api/users/:id/pii",headerSubText:"cURL"},'curl https://reg.cces.dev/api/users/:id/pii \\\n  -X DELETE \\\n  -H "Authorization: Bearer <id>:<secret>"'),(0,i.kt)("exampleBox",{header:"Response"},"204 No Content"))))}c.isMDXComponent=!0}}]);